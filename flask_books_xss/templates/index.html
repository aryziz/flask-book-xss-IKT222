{% extends "base.html" %}
{% block title %}Listings{% endblock %}
{% block content %}

<h1>Listings</h1>

{% if user %}
<form action="{{ url_for('web.list_book') }}" method="post">
    <label>Title</label>
    <input name="title" type="text" required>
    <label>Price (NOK)</label>
    <input name="price" type="number" min="0" step="0.01" required>
    <label>Description (optional, HTML allowed)</label>
    <textarea name="description" rows="4"></textarea>
    <button type="submit">Create listing</button>
</form>
{% else %}
<p class="muted">
    Log in to create a listing. <a href="{{ url_for('auth.login') }}">Login</a>
    or <a href="{{ url_for('auth.register') }}">Register</a>.
</p>
{% endif %}


{% if books %}
{% for b in books %}
<div class="card">
    <h3 style="margin:0">{{ b.title }}</h3>
    <div class="muted">Price: {{ b.price }} â€¢ Posted: {{ b.created_at }}</div>
    {% if b.description %}
    Description: {{ b.description | safe }}
    {% endif %}
    <div class="muted">Owner user_id: {{ b.user_id }}</div>
</div>
{% endfor %}
{% else %}
<p class="muted">No listings yet.</p>
{% endif %}

{% endblock %}